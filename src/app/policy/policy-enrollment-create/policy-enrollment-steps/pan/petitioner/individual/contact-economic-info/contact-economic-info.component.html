<section class="bp-mainpolicy">
  <form class="form-group" [formGroup]="wizard.enrollmentForm">
    <ng-container formGroupName="{{STEP_NAME}}">
      <ng-container formGroupName="{{SECTION_NAME}}">
        <article class="row">

          <div class="col-md-12">
            <div class="row">

              <div class="col-md-9">
                <div class="bp-itemtitle">
                  <!-- <div class="bp-titlenum"> {{CURRENT_STEP}} </div> -->
                  <h2 class="bp-titlepolicy"> {{'POLICY.POLICY_ENROLLMENT.STEP9.TITLE' | translate }} </h2>
                </div>
              </div>

              <!-- <div class="col-md-3">
                <app-breadcrumb-enrollment [currentStep]="CURRENT_STEP"
                    [lengthSection]="totalSectionByPetitionerType" [stepActive]="sectionActive">
                </app-breadcrumb-enrollment>
              </div> -->

            </div>
          </div>

          <div class="col-md-12">
            <app-policy-enrollment-info></app-policy-enrollment-info>
          </div>

          <div class="col-md-12">
            <div class="bp-itemcontsect2">

              <div class="row">
                <div class="col-md-4">
                  <h4 class="bp-contentitle">{{ 'POLICY.POLICY_ENROLLMENT.ADDRESS.ADDRESS_PHYSICAL' | translate }}</h4>
                </div>
                <div class="col-md-4">
                  <h4 class="bp-contentitle">{{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.ECONOMIC_INFORMATION' | translate }}</h4>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations}">
                    <label for="country">
                      {{ 'POLICY.POLICY_ENROLLMENT.INFO_CONTACT.COUNTRY' | translate }}
                    </label>
                    <ng-select #countrySelect [items]="wizard.countries$ | async" [selectOnTab]="true"
                      bindValue="countryId" bindLabel="countryName" formControlName="country"
                      class="form-control " (change)="handleCountryChanged($event)"
                      [placeholder]="f.country.value !== null && f.country.value !== ''
                                        ? '':'POLICY.POLICY_ENROLLMENT.SELECT' | translate ">
                    </ng-select>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations }">
                    <label for="province">
                      {{ 'POLICY.POLICY_ENROLLMENT.ADDRESS.MAYORALTY_MUNICIPALITY' | translate }} </label>
                    <input type="text" class="form-control" id="province"
                      formControlName="province"
                      [placeholder]="f.province.value !== null && f.province.value !== ''
                          ? '': 'POLICY.POLICY_ENROLLMENT.ADDRESS.PH_MAYORALTY_MUNICIPALITY' | translate "
                      [required]="f.province.errors?.required"
                      [maxlength]="getValidatorValue('province', 'maxLength')"
                      [pattern]="getValidatorValue('province', 'pattern')"
                      [minlength]="getValidatorValue('province', 'minLength')">
                    <div class="invalid-feedback" *ngIf="f.province.errors?.pattern">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('province', 'pattern') | uppercase | translate}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.province.errors?.maxlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('province', 'maxLength') | uppercase | translate}}
                      {{f.province.errors?.maxlength.requiredLength}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.province.errors?.minlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('province', 'minLength') | uppercase | translate}}
                      {{f.province.errors?.minlength.requiredLength}}
                    </div>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations}">
                    <label for="city"> {{ 'POLICY.POLICY_ENROLLMENT.ADDRESS.CITY' | translate }} </label>
                    <ng-select #citySelect [items]="cities$ | async" [selectOnTab]="true" bindValue="cityId"
                      bindLabel="cityName" formControlName="city" class="form-control "
                      [placeholder]="f.city.value !== null && f.city.value !== ''
                                    ? '':'POLICY.POLICY_ENROLLMENT.SELECT' | translate "
                      [required]="f.city.hasError('required')">
                    </ng-select>
                    <div class="invalid-feedback" *ngIf="f.city.errors?.required">
                      {{ 'APP.MESSAGE.REQUIRED_FIELD' | translate }}
                    </div>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations }">
                    <label for="zipCode"> {{ 'POLICY.POLICY_ENROLLMENT.ADDRESS.ZIP_CODE' | translate }} </label>
                    <input type="text" class="form-control" id="zipCode" formControlName="zipCode"
                      [placeholder]="f.zipCode.value !== null && f.zipCode.value !== ''
                          ? '': 'POLICY.POLICY_ENROLLMENT.ADDRESS.PH_ZIP_CODE' | translate "
                      [required]="f.zipCode.errors?.required"
                      [maxlength]="getValidatorValue('zipCode', 'maxLength')"
                      [pattern]="getValidatorValue('zipCode', 'pattern')"
                      [minlength]="getValidatorValue('zipCode', 'minLength')">
                    <div class="invalid-feedback" *ngIf="f.zipCode.errors?.pattern">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('zipCode', 'pattern') | uppercase | translate}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.zipCode.errors?.maxlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('zipCode', 'maxLength') | uppercase | translate}}
                      {{f.zipCode.errors?.maxlength.requiredLength}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.zipCode.errors?.minlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('zipCode', 'minLength') | uppercase | translate}}
                      {{f.zipCode.errors?.minlength.requiredLength}}
                    </div>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations }">
                    <label for="howLongAtHome"> {{ 'POLICY.POLICY_ENROLLMENT.ADDRESS.LBL_YEARS_IN_ADDRESS' | translate }}
                    </label>
                    <input type="text" class="form-control" id="howLongAtHome" formControlName="howLongAtHome"
                      [placeholder]="f.howLongAtHome.value !== null && f.howLongAtHome.value !== ''
                          ? '': 'POLICY.POLICY_ENROLLMENT.ADDRESS.PH_YEARS_IN_ADDRESS' | translate "
                      [required]="f.howLongAtHome.errors?.required"
                      [maxlength]="getValidatorValue('howLongAtHome', 'maxLength')"
                      [pattern]="getValidatorValue('howLongAtHome', 'pattern')"
                      [minlength]="getValidatorValue('howLongAtHome', 'minLength')">

                    <div class="invalid-feedback" *ngIf="f.howLongAtHome.errors?.pattern">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('howLongAtHome', 'pattern') | uppercase | translate}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.howLongAtHome.errors?.maxlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('howLongAtHome', 'maxLength') | uppercase | translate}}
                      {{f.howLongAtHome.errors?.maxlength.requiredLength}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.howLongAtHome.errors?.minlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('howLongAtHome', 'minLength') | uppercase | translate}}
                      {{f.howLongAtHome.errors?.minlength.requiredLength}}
                    </div>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations}">
                    <label for="address"> {{ 'POLICY.POLICY_ENROLLMENT.ADDRESS.STREET' | translate }} </label>
                    <textarea cols="30" rows="1" class="form-control" id="address" formControlName="address"
                      [placeholder]="f.address.value !== null && f.address.value !== ''
                                            ? '': 'POLICY.POLICY_ENROLLMENT.ADDRESS.PH_STREET_AVENUE' | translate "
                      [required]="getValidatorValue('address', 'required')"
                      [maxlength]="getValidatorValue('address', 'maxLength')"
                      [pattern]="getValidatorValue('address', 'pattern')"
                      [minlength]="getValidatorValue('address', 'minLength')">
                    </textarea>
                    <div class="invalid-feedback" *ngIf="f.address.errors?.pattern">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('address', 'pattern') | uppercase | translate}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.address.errors?.maxlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('address', 'maxLength') | uppercase | translate}}
                      {{f.address.errors?.maxlength.requiredLength}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.address.errors?.minlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('address', 'minLength') | uppercase | translate}}
                      {{f.address.errors?.minlength.requiredLength}}
                    </div>
                  </div>
                </div>

                <div class="col-md-4">
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations}">
                    <label for="occupationProfession">
                      {{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.OCCUPATION' | translate }}
                    </label>
                    <ng-select #occupationProfessionSelect [items]="wizard.industries$ | async" [selectOnTab]="true"
                      bindValue="industryId" bindLabel="name" formControlName="occupationProfession"
                      class="form-control" [required]="f.occupationProfession.errors?.required"
                      [placeholder]="f.occupationProfession.value !== null
                                        && f.occupationProfession.value !== ''
                                            ? '': 'POLICY.POLICY_ENROLLMENT.SELECT' | translate ">
                    </ng-select>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations}">
                    <label for="avgAnnualIncome">
                      {{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.LBL_AVG_ANNUAL_INCOME' | translate }}
                    </label>
                    <input type="text" class="form-control" id="avgAnnualIncome"
                      placeholder="{{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.PH__AVG_ANNUAL_INCOME' | translate }}"
                      formControlName="avgAnnualIncome"
                      [maxlength]="getValidatorValue('avgAnnualIncome', 'maxLength')"
                      [pattern]="getValidatorValue('avgAnnualIncome', 'pattern')"
                      [minlength]="getValidatorValue('avgAnnualIncome', 'minLength')"
                      [required]="f.avgAnnualIncome.hasError('required')">
                    <div class="invalid-feedback" *ngIf="f.avgAnnualIncome.errors?.pattern">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('avgAnnualIncome', 'pattern') | uppercase | translate}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.avgAnnualIncome.errors?.maxlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('avgAnnualIncome', 'maxLength') | uppercase | translate}}
                      {{f.avgAnnualIncome.errors?.maxlength.requiredLength}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.avgAnnualIncome.errors?.minlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('avgAnnualIncome', 'minLength') | uppercase | translate}}
                      {{f.avgAnnualIncome.errors?.minlength.requiredLength}}
                    </div>
                  </div>
                  <div class="form-group" [ngClass]="{ 'was-validated' : showValidations}">
                    <label for="placeTaxed">
                      {{ 'POLICY.POLICY_ENROLLMENT.STEP9.PERSONAL_INFORMATION.TAXES_PLACE' | translate }}
                    </label>
                    <input type="text" class="form-control" id="placeTaxed"
                      placeholder="{{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.PH_PLACE_WORK' | translate }}"
                      formControlName="placeTaxed"
                      [maxlength]="getValidatorValue('placeTaxed', 'maxLength')"
                      [pattern]="getValidatorValue('placeTaxed', 'pattern')"
                      [minlength]="getValidatorValue('placeTaxed', 'minLength')"
                      [required]="f.placeTaxed.hasError('required')">
                    <div class="invalid-feedback" *ngIf="f.placeTaxed.errors?.pattern">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('placeTaxed', 'pattern') | uppercase | translate}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.placeTaxed.errors?.maxlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('placeTaxed', 'maxLength') | uppercase | translate}}
                      {{f.placeTaxed.errors?.maxlength.requiredLength}}
                    </div>
                    <div class="invalid-feedback" *ngIf="f.placeTaxed.errors?.minlength">
                      {{ 'APP.MESSAGE.' | concatenate: getValidatorMessage('placeTaxed', 'minLength') | uppercase | translate}}
                      {{f.placeTaxed.errors?.minlength.requiredLength}}
                    </div>
                  </div>
                  <div class="form-group" [ngClass]="{ 'border-danger': f.isPEP.invalid && showValidations }">
                    <label for="formGroupExampleInput">
                      {{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.LBL_IS_PEP' | translate }}
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="isPEP1" value="true"
                      formControlName="isPEP">
                    <label class="form-check-label" for="isPEP1">{{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_YES' | translate }}</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="isPEP2" value="false"
                      formControlName="isPEP">
                    <label class="form-check-label" for="isPEP2">{{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_NO' | translate }}</label>
                  </div>

                  <div class="form-group" [ngClass]="{ 'border-danger': f.isPEP.invalid && showValidations }">
                    <label for="formGroupExampleInput">
                      {{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.LBL_RELATIONSHIP_PEP' | translate }}
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="isRelatedToPEP1" value="true"
                      formControlName="isRelatedToPEP">
                    <label class="form-check-label" for="isRelatedToPEP1">{{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_YES' | translate }}</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="isRelatedToPEP2" value="false"
                      formControlName="isRelatedToPEP">
                    <label class="form-check-label" for="isRelatedToPEP2">{{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_NO' | translate }}</label>
                  </div>

                  <div class="form-group" [ngClass]="{ 'border-danger': f.isPEP.invalid && showValidations }">
                    <label for="formGroupExampleInput">
                      {{ 'POLICY.POLICY_ENROLLMENT.ECONOMIC_INFO.LBL_ASSOCIATED_PEP' | translate }}
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="isCloseAssociatePEP1" value="true"
                      formControlName="isCloseAssociatePEP">
                    <label class="form-check-label" for="isCloseAssociatePEP1">{{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_YES' | translate }}</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="isCloseAssociatePEP2" value="false"
                      formControlName="isCloseAssociatePEP">
                    <label class="form-check-label" for="isCloseAssociatePEP2">{{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_NO' | translate }}</label>
                  </div>
                </div>

                <div class="col-md-4" >
                  <div class="form-group" [ngClass]="{ 'border-danger': f.isPEP.invalid && showValidations }">
                    <label>{{ 'POLICY.POLICY_ENROLLMENT.STEP1.SECTION_01.QUESTION_01' | translate }}</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="residentYes" value="true"
                        formControlName="isUSAResident">
                    <label class="form-check-label" for="residentYes">
                      {{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_YES' | translate }}
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="residentNo" value="false"
                        formControlName="isUSAResident">
                    <label class="form-check-label" for="residentNo">
                      {{'POLICY.POLICY_ENROLLMENT.STEP9.CHECK_NO' | translate }}
                    </label>
                  </div>
                </div>
              </div>

              <div class="col-md-12 mt-2" *ngIf="showValidations && currentFormGroup.invalid">
                <div class="bp-alertform">
                  <div class="alert alert-danger" role="alert">
                    <i class="material-icons">info</i>
                    {{ 'POLICY.POLICY_ENROLLMENT.STEP2.INFO_INCOMPLETE' | translate }}
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-4 offset-md-4">
                  <div class="row align-items-center">
                    <div class="col-md-6">
                      <button class="bp-btn bp-btnsecondary" type="button" (click) = "back()"> {{ 'POLICY.POLICY_ENROLLMENT.BACK' | translate }} </button>
                    </div>
                    <div class="col-md-6">
                      <button class="bp-btn bp-btnprimary" type="button" (click) = "next()">{{ 'POLICY.POLICY_ENROLLMENT.SAVE_CONTINUE' | translate }}</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </article>
    </ng-container>
  </ng-container>
  </form>
</section>
